<div
  class="bg-gray-50 dark:bg-gray-900 font-display text-gray-900 dark:text-white min-h-screen flex flex-col overflow-x-hidden">
  <!-- Top Navigation Bar -->
  <header
    class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 dark:border-gray-800 bg-white dark:bg-[#111418] px-10 py-3 sticky top-0 z-50">
    <div class="flex items-center gap-8">
      <div class="flex items-center gap-4">
        <div class="size-8 text-blue-600"><span class="material-symbols-outlined !text-3xl">bolt</span></div>
        <h2 class="text-lg font-bold">{{ 'header.luxelectric' | i18n }}</h2>
      </div>
      <nav class="hidden md:flex items-center gap-9">
        <a routerLink="/dashboard" class="text-sm font-medium hover:text-blue-600 transition-colors">{{
          'header.nav.home' | i18n }}</a>
        <a routerLink="/theory" class="text-sm font-medium hover:text-blue-600 transition-colors">{{ 'header.nav.theory'
          | i18n }}</a>
        <a routerLink="/practice" class="text-sm font-bold text-blue-600 transition-colors">{{ 'header.nav.practice' |
          i18n }}</a>
        <a routerLink="/games" class="text-sm font-medium hover:text-blue-600 transition-colors">{{ 'header.nav.games' |
          i18n }}</a>
        <a routerLink="/simulator" class="text-sm font-medium hover:text-blue-600 transition-colors">{{
          'header.nav.simulator' | i18n }}</a>
      </nav>
    </div>
    <div class="flex items-center gap-4">
      <button
        class="flex size-10 items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
        <span class="material-symbols-outlined">notifications</span>
      </button>
    </div>
  </header>
  <!-- Main Content Area: Virtual Workshop -->
  <div class="flex-1 overflow-y-auto bg-[#0a0f14] p-4 md:p-10">

    @if (viewMode() === 'cabins') {
    <div class="max-w-7xl mx-auto w-full animate-fade-in">
      <header class="mb-12 flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
        <div>
          <h1 class="text-4xl md:text-5xl font-black text-white tracking-tighter uppercase italic">{{
            'practice.workshop_title' | i18n }}</h1>
          <p class="text-gray-400 text-lg mt-2">{{ 'practice.workshop_subtitle' | i18n }}</p>
        </div>
        <div class="flex gap-4">
          <div class="px-4 py-2 bg-blue-600/20 border border-blue-500/30 rounded-lg flex items-center gap-2">
            <span class="size-2 rounded-full bg-blue-500 animate-pulse"></span>
            <span class="text-xs font-bold text-blue-400 uppercase tracking-widest">{{ 'practice.online_tag' | i18n
              }}</span>
          </div>
        </div>
      </header>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
        @for (cabin of cabins; track cabin.id) {
        <div (click)="selectCabin(cabin.id)"
          class="group relative bg-[#111a22] rounded-3xl border-2 border-gray-800 hover:border-blue-500/50 transition-all duration-500 cursor-pointer overflow-hidden flex flex-col ">

          <!-- Imagen de Cabecera -->
          <div class="h-40 relative overflow-hidden">
            <img [src]="cabin.thumbnail" [alt]="cabin.title | i18n"
              class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 opacity-60 group-hover:opacity-100">
            <div class="absolute inset-0 bg-gradient-to-t from-[#111a22] to-transparent"></div>
            <div class="absolute top-4 left-4 z-10 flex gap-2">
              <span
                class="px-3 py-1 bg-[#1a222c]/80 backdrop-blur-md rounded-full text-[10px] font-black uppercase tracking-tighter border border-white/5"
                [class.text-blue-400]="cabin.difficulty === 'Medio'"
                [class.text-red-400]="cabin.difficulty === 'Experto'"
                [class.text-green-400]="cabin.difficulty === 'Fácil'">
                {{ 'practice.cabins.level' | i18n }}: {{ cabin.difficulty }}
              </span>
            </div>
          </div>

          <div class="p-8 flex flex-col gap-6 flex-1">
            <!-- Brillo de fondo (efecto Steam) -->
            <div
              class="absolute -right-20 -top-20 size-80 bg-blue-500/10 blur-[100px] group-hover:bg-blue-500/20 transition-all duration-500">
            </div>

            <div class="flex justify-between items-start relative z-10">
              <div
                class="bg-[#1a222c] p-4 rounded-2xl border border-gray-700 group-hover:border-blue-500/50 transition-colors">
                <span class="material-symbols-outlined !text-4xl text-blue-500">{{ cabin.icon }}</span>
              </div>
            </div>

            <div class="relative z-10">
              <h3
                class="text-2xl font-black text-white uppercase italic tracking-tight mb-2 group-hover:text-blue-400 transition-colors">
                {{ cabin.title | i18n }}</h3>
              <p class="text-gray-400 text-sm leading-relaxed">{{ cabin.description | i18n }}</p>
            </div>

            <div class="mt-auto flex items-center justify-between relative z-10">
              <div class="flex -space-x-2">
                <div
                  class="size-8 rounded-full border-2 border-[#111a22] bg-gray-700 flex items-center justify-center text-[10px] font-bold text-white">
                  L1</div>
                <div
                  class="size-8 rounded-full border-2 border-[#111a22] bg-gray-500 flex items-center justify-center text-[10px] font-bold text-white">
                  L2</div>
                <div
                  class="size-8 rounded-full border-2 border-[#111a22] bg-gray-800 flex items-center justify-center text-[10px] font-bold text-white">
                  L3</div>
              </div>
              <button
                class="flex items-center gap-2 text-xs font-black text-blue-500 uppercase tracking-widest group-hover:gap-4 transition-all">
                {{ 'practice.cabins.enter' | i18n }}
                <span class="material-symbols-outlined">arrow_forward</span>
              </button>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
    } @else {
    <!-- Vista de Montaje (Ya existente, mejorada) -->
    <div class="flex flex-1 gap-6 max-w-[1600px] mx-auto w-full animate-slide-up">
      <aside class="hidden lg:flex flex-col w-80 shrink-0 gap-6 h-fit sticky top-10">
        <div class="bg-[#111a22] rounded-3xl p-6 border border-gray-800 shadow-2xl">
          <button (click)="viewMode.set('cabins')"
            class="flex items-center gap-2 text-gray-500 hover:text-white mb-6 text-sm font-bold transition-colors">
            <span class="material-symbols-outlined text-sm">arrow_back</span> {{ 'practice.back_to_workshop' | i18n }}
          </button>
          <h2 class="text-lg font-black text-white uppercase italic tracking-tighter mb-4">{{ 'practice.roadmap' |
            i18n }}</h2>
          <div class="space-y-4">
            @for (step of steps; track step.id) {
            <div class="flex items-center gap-4 group cursor-pointer">
              <div class="size-8 rounded-xl border-2 flex items-center justify-center font-black text-xs transition-all"
                [class.bg-blue-600]="step.status === 'active'" [class.border-blue-600]="step.status === 'active'"
                [class.text-white]="step.status === 'active'" [class.border-gray-800]="step.status !== 'active'"
                [class.text-gray-600]="step.status !== 'active'" [class.bg-green-600]="step.status === 'done'"
                [class.border-green-600]="step.status === 'done'">
                @if (step.status === 'done') { <span class="material-symbols-outlined text-sm">check</span> }
                @else { {{ step.id }} }
              </div>
              <span class="text-sm font-bold uppercase tracking-tight" [class.text-white]="step.status === 'active'"
                [class.text-gray-500]="step.status !== 'active'" [class.line-through]="step.status === 'done'">{{
                step.title | i18n }}</span>
            </div>
            }
          </div>
        </div>
      </aside>

      <main class="flex-1 flex flex-col gap-6 min-w-0">
        <div class="bg-[#111a22] rounded-3xl border border-gray-800 shadow-2xl overflow-hidden flex flex-col h-fit">
          <div class="p-8 md:p-12">
            <div class="flex items-center justify-between mb-8">
              <div class="flex items-center gap-4">
                <span
                  class="bg-blue-600 text-white px-3 py-1 rounded-lg text-xs font-black uppercase tracking-widest">{{
                  'trainer.mode' | i18n }}</span>
                <h1 class="text-3xl md:text-4xl font-black text-white uppercase italic tracking-tighter">
                  {{ (selectedCabinId() === 'c1' ? 'practice.cabins.c1.title' : (selectedCabinId() === 'c2' ?
                  'practice.cabins.c2.title' : (selectedCabinId() === 'c3' ? 'practice.cabins.c3.title' :
                  'practice.cabins.c4.title'))) | i18n }}
                </h1>
              </div>
              @if (selectedCabinId() === 'c1') {
              <button (click)="resetConnections()"
                class="flex items-center gap-2 px-4 py-2 bg-[#1a222c] hover:bg-red-900/40 text-gray-400 hover:text-red-400 border border-gray-700 hover:border-red-900/50 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all">
                <span class="material-symbols-outlined text-sm">refresh</span>
                {{ 'practice.montage.reset_cables' | i18n }}
              </button>
              }
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
              @if (selectedCabinId() === 'c1') {
              <!-- Cabina A: Motores -->
              <div class="space-y-8">
                <div class="bg-[#0a0f14] rounded-3xl p-8 border border-gray-800 shadow-inner relative overflow-hidden">
                  <div class="absolute inset-0 opacity-5 pointer-events-none"
                    style="background-image: radial-gradient(#3b82f6 1px, transparent 1px); background-size: 20px 20px;">
                  </div>
                  <h3 class="text-xs font-black text-blue-500 uppercase tracking-[0.2em] mb-8 flex items-center gap-2">
                    <span class="size-2 bg-blue-500 rounded-full animate-pulse"></span>
                    {{ 'practice.montage.power_panel' | i18n }}
                  </h3>
                  <div class="flex justify-center gap-12 mb-12">
                    @for (borne of bornes(); track borne.id) {
                    @if (borne.type === 'power') {
                    <div class="flex flex-col items-center gap-3">
                      <button (click)="toggleBorne(borne.id)"
                        [class]="activeSourceBorne() === borne.id ? 'border-blue-500 shadow-lg shadow-blue-500/50 scale-110' : (borne.connectedTo ? 'border-green-500 shadow-lg shadow-green-500/20' : 'border-gray-700')"
                        class="size-12 rounded-full border-2 bg-[#1a222c] flex items-center justify-center transition-all group overflow-hidden relative">
                        <div
                          class="absolute inset-0 bg-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity">
                        </div>
                        <span class="text-xs font-black text-white z-10">{{ borne.label }}</span>
                      </button>
                      <span class="text-[10px] font-bold text-gray-500 uppercase tracking-tighter">RED</span>
                    </div>
                    }
                    }
                  </div>
                  <div class="bg-[#111a22] rounded-2xl border border-gray-800 p-8">
                    <div class="grid grid-cols-3 gap-8">
                      @for (borne of bornes(); track borne.id) {
                      @if (borne.type === 'motor') {
                      <div class="flex flex-col items-center gap-3">
                        <button (click)="toggleBorne(borne.id)"
                          [class]="activeSourceBorne() === borne.id ? 'border-blue-500 shadow-lg shadow-blue-500/50 scale-110' : (borne.connectedTo ? 'border-green-500 shadow-lg shadow-green-500/20' : 'border-gray-700')"
                          class="size-12 rounded-xl border-2 bg-[#0a0f14] flex items-center justify-center transition-all group overflow-hidden relative">
                          <div class="size-2 bg-gray-600 rounded-full mb-1"></div>
                          <span class="text-[10px] font-black text-gray-300 absolute bottom-1 uppercase">{{
                            borne.label }}</span>
                        </button>
                      </div>
                      }
                      }
                    </div>
                  </div>
                  @if (activeSourceBorne()) {
                  <div class="mt-8 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl animate-pulse">
                    <p class="text-xs font-bold text-blue-400 uppercase tracking-widest text-center">Selecciona otro
                      borne...</p>
                  </div>
                  }
                </div>
              </div>
              } @else if (selectedCabinId() === 'c2') {
              <!-- Cabina B: KNX -->
              <div class="space-y-8">
                <div class="bg-[#0a0f14] rounded-3xl p-8 border border-gray-800 shadow-inner relative overflow-hidden">
                  <div class="absolute inset-0 opacity-10 pointer-events-none"
                    style="background-image: radial-gradient(#22c55e 1px, transparent 1px); background-size: 30px 30px;">
                  </div>
                  <h3 class="text-xs font-black text-green-500 uppercase tracking-[0.2em] mb-8 flex items-center gap-2">
                    <span class="size-2 bg-green-500 rounded-full animate-pulse shadow-lg shadow-green-500/50"></span>
                    {{ 'practice.montage.knx_panel' | i18n }}
                  </h3>
                  <div class="space-y-4">
                    @for (comp of knxComponents(); track comp.id) {
                    <div
                      class="bg-[#111a22] p-6 rounded-2xl border border-gray-800 hover:border-green-500/30 transition-all">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                          <div
                            class="size-12 rounded-xl bg-green-500/10 border border-green-500/20 flex items-center justify-center">
                            <span class="material-symbols-outlined text-green-500">{{ comp.type === 'sensor' ?
                              'touch_app' : (comp.type === 'supply' ? 'bolt' : 'settings_input_component') }}</span>
                          </div>
                          <div>
                            <h4 class="text-sm font-black text-white uppercase">{{ comp.name | i18n }}</h4>
                            <p class="text-[10px] text-gray-500 font-bold tracking-widest uppercase">{{
                              'practice.montage.physical_address' | i18n }}:
                              {{ comp.address }}</p>
                          </div>
                        </div>
                        @if (comp.type !== 'supply') {
                        <div class="flex flex-col items-end gap-2">
                          <span class="text-[9px] font-black text-gray-600 uppercase tracking-widest">Dir.
                            Grupo</span>
                          <input type="text" [placeholder]="'0/0/0'" [value]="comp.groupAddress || ''"
                            (input)="assignGroupAddress(comp.id, $any($event.target).value)"
                            class="w-24 bg-[#0a0f14] border border-gray-700 rounded-xl px-3 py-2 text-xs font-black text-green-400 text-center focus:border-green-500 outline-none transition-all">
                        </div>
                        }
                      </div>
                    </div>
                    }
                  </div>
                </div>
              </div>
              } @else if (selectedCabinId() === 'c3') {
              <!-- Cabina C: Cuadro Eléctrico -->
              <div class="space-y-8">
                <div class="bg-[#0a0f14] rounded-3xl p-8 border border-gray-800 shadow-inner relative overflow-hidden">
                  <div class="absolute inset-0 opacity-10 pointer-events-none"
                    style="background-image: repeating-linear-gradient(0deg, #3b82f611, #3b82f611 1px, transparent 1px, transparent 40px);">
                  </div>
                  <h3 class="text-xs font-black text-blue-400 uppercase tracking-[0.2em] mb-10 flex items-center gap-2">
                    <span class="size-2 bg-blue-400 rounded-full animate-pulse shadow-lg shadow-blue-400/50"></span>
                    {{ 'practice.montage.din_panel' | i18n }}
                  </h3>
                  <div class="flex flex-col gap-3">
                    @for (comp of cuadroComponents(); track comp.id) {
                    <div (click)="toggleCuadroComponent(comp.id)"
                      [class]="comp.connected ? 'border-blue-500 bg-blue-500/5' : 'border-gray-800 hover:border-gray-700'"
                      class="group flex items-center justify-between p-5 rounded-2xl border-2 transition-all cursor-pointer relative">
                      <div class="flex items-center gap-5 z-10">
                        <span class="material-symbols-outlined !text-3xl"
                          [class]="comp.connected ? 'text-blue-500' : 'text-gray-700'">{{ comp.type === 'main' ?
                          'bolt'
                          : (comp.type === 'diff' ? 'shield_with_heart' : 'electric_switch') }}</span>
                        <div>
                          <h4 class="text-xs font-black text-white uppercase">{{ comp.name | i18n }}</h4>
                          <p [class]="comp.connected ? 'text-green-500' : 'text-red-500'"
                            class="text-[8px] font-black uppercase tracking-widest mt-1">
                            {{ comp.connected ? 'OK' : ('practice.status.pending' | i18n) }}
                          </p>
                        </div>
                      </div>
                      <div [class]="comp.connected ? 'bg-blue-600' : 'bg-gray-800'"
                        class="size-4 rounded-full border-2 border-[#0a0f14]"></div>
                      @if (comp.parentId) { <div class="absolute -top-3 left-8 w-0.5 h-4 bg-gray-800"
                        [class.bg-blue-500]="comp.connected"></div> }
                    </div>
                    }
                  </div>
                </div>
              </div>
              } @else if (selectedCabinId() === 'c4') {
              <!-- Cabina D: Lógica Programada -->
              <div class="space-y-8">
                <div class="bg-[#0a0f14] rounded-3xl p-8 border border-gray-800 shadow-inner relative overflow-hidden">
                  <div class="absolute inset-0 opacity-10 pointer-events-none"
                    style="background-image: radial-gradient(#ec4899 1px, transparent 1px); background-size: 20px 20px;">
                  </div>
                  <h3 class="text-xs font-black text-pink-500 uppercase tracking-[0.2em] mb-10 flex items-center gap-2">
                    <span class="size-2 bg-pink-500 rounded-full animate-pulse shadow-lg shadow-pink-500/50"></span>
                    {{ 'practice.montage.logo_panel' | i18n }}
                  </h3>
                  <div class="grid grid-cols-2 gap-10">
                    <div class="space-y-4">
                      <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Entradas (I)</p>
                      @for (input of logicInputs(); track input.id) {
                      <button (click)="toggleLogicInput(input.id)"
                        [class]="input.state ? 'bg-pink-500 border-pink-400 shadow-lg shadow-pink-500/20' : 'bg-[#111a22] border-gray-800'"
                        class="w-full p-6 rounded-2xl border-2 transition-all flex items-center justify-between group">
                        <span class="text-xs font-black" [class]="input.state ? 'text-white' : 'text-gray-500'">{{
                          input.id }}</span>
                        <span class="material-symbols-outlined"
                          [class]="input.state ? 'text-white' : 'text-gray-700'">{{ input.state ? 'toggle_on' :
                          'toggle_off' }}</span>
                      </button>
                      }
                    </div>
                    <div class="space-y-4">
                      <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Función (F)</p>
                      <div
                        class="bg-[#111a22] p-8 rounded-2xl border-2 border-gray-800 flex flex-col items-center justify-center gap-4 relative">
                        <select [value]="selectedLogicGate()"
                          (change)="selectedLogicGate.set($any($event.target).value)"
                          class="bg-transparent text-2xl font-black text-white text-center outline-none cursor-pointer hover:text-pink-400 transition-colors">
                          <option value="AND">AND</option>
                          <option value="OR">OR</option>
                          <option value="XOR">XOR</option>
                        </select>
                        <div class="h-px w-full bg-gray-800"></div>
                        <div
                          [class]="logicOutput ? 'bg-green-500 border-green-400 shadow-xl shadow-green-500/30' : 'bg-gray-800 border-gray-700'"
                          class="size-16 rounded-3xl border-2 flex items-center justify-center transition-all">
                          <span class="text-xs font-black text-white">Q1</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              }

              <div class="flex flex-col gap-6">
                <!-- Panel de Verificación Dinámico -->
                <div class="bg-[#111a22] rounded-3xl p-8 border border-gray-800 flex flex-col gap-6">
                  <div class="flex items-center justify-between">
                    <h3 class="text-lg font-black text-white uppercase italic tracking-tighter">{{
                      'practice.status.title' | i18n }}
                    </h3>
                    <div class="flex items-center gap-2">
                      <span class="size-2 rounded-full"
                        [class.bg-green-500]="selectedCabinId() === 'c1' ? isCircuitoCorrecto : (selectedCabinId() === 'c2' ? isKnxCorrecto : (selectedCabinId() === 'c3' ? isCuadroCorrecto : isLogicCorrecto))"
                        [class.bg-red-500]="selectedCabinId() === 'c1' ? !isCircuitoCorrecto : (selectedCabinId() === 'c2' ? !isKnxCorrecto : (selectedCabinId() === 'c3' ? !isCuadroCorrecto : !isLogicCorrecto))"></span>
                      <span class="text-[10px] font-black uppercase tracking-widest"
                        [class.text-green-500]="selectedCabinId() === 'c1' ? isCircuitoCorrecto : (selectedCabinId() === 'c2' ? isKnxCorrecto : (selectedCabinId() === 'c3' ? isCuadroCorrecto : isLogicCorrecto))"
                        [class.text-red-500]="selectedCabinId() === 'c1' ? !isCircuitoCorrecto : (selectedCabinId() === 'c2' ? !isKnxCorrecto : (selectedCabinId() === 'c3' ? !isCuadroCorrecto : !isLogicCorrecto))">
                        {{ (selectedCabinId() === 'c1' ? isCircuitoCorrecto : (selectedCabinId() === 'c2' ?
                        isKnxCorrecto : (selectedCabinId() === 'c3' ? isCuadroCorrecto : isLogicCorrecto))) ?
                        ('practice.status.validated' | i18n) : ('practice.status.pending' | i18n) }}
                      </span>
                    </div>
                  </div>

                  <div class="space-y-4">
                    @if (selectedCabinId() === 'c1') {
                    <div class="p-4 rounded-2xl border border-gray-800 bg-[#0a0f14]/50 flex items-center gap-4"
                      [class.border-green-500/30]="isCircuitoCorrecto">
                      <span class="material-symbols-outlined" [class.text-green-500]="isCircuitoCorrecto">{{
                        isCircuitoCorrecto ? 'check_circle' : 'pending' }}</span>
                      <div>
                        <p class="text-xs font-black text-white uppercase">Puente Estrella (W2-U2-V2)</p>
                      </div>
                    </div>
                    } @else if (selectedCabinId() === 'c2') {
                    <div class="p-4 rounded-2xl border border-gray-800 bg-[#0a0f14]/50 flex items-center gap-4"
                      [class.border-green-500/30]="isKnxCorrecto">
                      <span class="material-symbols-outlined" [class.text-green-500]="isKnxCorrecto">sync</span>
                      <div>
                        <p class="text-xs font-black text-white uppercase">Vinculación 1/1/1</p>
                      </div>
                    </div>
                    } @else if (selectedCabinId() === 'c3') {
                    <div class="p-4 rounded-2xl border border-gray-800 bg-[#0a0f14]/50 flex items-center gap-4"
                      [class.border-green-500/30]="isCuadroCorrecto">
                      <span class="material-symbols-outlined"
                        [class.text-green-500]="isCuadroCorrecto">account_tree</span>
                      <div>
                        <p class="text-xs font-black text-white uppercase">Peinado de Protecciones</p>
                      </div>
                    </div>
                    }
                  </div>

                  <div
                    class="mt-4 aspect-video bg-[#1a222c] rounded-xl border border-gray-700 overflow-hidden relative group">
                    <img
                      [src]="selectedCabinId() === 'c1' ? 'assets/images/premium/motor_3d.png' : (selectedCabinId() === 'c2' ? 'assets/images/exercises/IMG_0942.PNG' : (selectedCabinId() === 'c3' ? 'assets/images/premium/cabinet.png' : 'assets/images/exercises/IMG_0940.PNG'))"
                      class="w-full h-full object-cover opacity-40 group-hover:opacity-100 transition-all duration-700">
                    <div class="absolute inset-0 bg-gradient-to-t from-[#0a0f14] to-transparent"></div>
                  </div>
                </div>

                <div class="bg-blue-600/5 rounded-2xl p-6 border border-blue-600/20"
                  [class.border-green-500/20]="selectedCabinId() === 'c2'">
                  <div class="flex items-center gap-2 mb-2 text-blue-500">
                    <span class="material-symbols-outlined text-sm">info</span>
                    <span class="text-[10px] font-black uppercase tracking-widest">{{ 'practice.montage.protocol' |
                      i18n }}</span>
                  </div>
                  <p class="text-xs text-gray-500 italic">
                    {{ (selectedCabinId() === 'c1' ? 'practice.montage.hints.c1' : (selectedCabinId() === 'c2'
                    ? 'practice.montage.hints.c2' : (selectedCabinId() === 'c3' ? 'practice.montage.hints.c3' :
                    'practice.montage.hints.c4'))) | i18n }}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-[#1a222c] p-6 border-t border-gray-800 flex justify-end">
            <button (click)="completeMontage()"
              [disabled]="selectedCabinId() === 'c1' ? !isCircuitoCorrecto : (selectedCabinId() === 'c2' ? !isKnxCorrecto : (selectedCabinId() === 'c3' ? !isCuadroCorrecto : !isLogicCorrecto))"
              [class]="(selectedCabinId() === 'c1' ? isCircuitoCorrecto : (selectedCabinId() === 'c2' ? isKnxCorrecto : (selectedCabinId() === 'c3' ? isCuadroCorrecto : isLogicCorrecto))) ? 'bg-green-600 text-white hover:bg-green-500 shadow-xl shadow-green-500/20' : 'bg-white/10 text-gray-500 cursor-not-allowed'"
              class="px-10 h-14 rounded-2xl font-black uppercase tracking-tighter transition-all flex items-center gap-3">
              {{ (selectedCabinId() === 'c1' ? isCircuitoCorrecto : (selectedCabinId() === 'c2' ? isKnxCorrecto :
              (selectedCabinId() === 'c3' ? isCuadroCorrecto : isLogicCorrecto))) ? ('practice.montage.validate_btn' |
              i18n) : ('practice.montage.pending_btn' | i18n) }}
              <span class="material-symbols-outlined">{{ (selectedCabinId() === 'c1' ? isCircuitoCorrecto :
                (selectedCabinId() === 'c2' ? isKnxCorrecto : (selectedCabinId() === 'c3' ? isCuadroCorrecto :
                isLogicCorrecto))) ? 'check_circle' : 'lock' }}</span>
            </button>
          </div>
        </div>
      </main>
    </div>
    }
  </div>

</div>